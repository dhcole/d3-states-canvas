<!DOCTYPE html>
<meta charset="utf-8">
<script src="http://mbostock.github.com/d3/d3.v2.js?2.8.1"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="http://canvg.googlecode.com/svn/trunk/canvg.js"></script> 
<style id="style" type='text/css'>

#map, canvas {
  width: 480px;
  height: 250px;
  position: absolute;
  top: 0;
  left: 0;
}
#map {
    visibility: hidden;
  }


</style>
<body>

<div id="map"></div>
<a href="#"><canvas id="canvas"></canvas></a>

<script>

$(function() {

    var width = $('#map').width(),
        height = $('#map').height();
    
    var projection = d3.geo.albersUsa()
        .scale(width)
        .translate([width / 2, height / 2]);
    
    var path = d3.geo.path()
        .projection(projection);
    
    var svg = d3.select("#map").append("svg")
        .attr("width", width)
        .attr("height", height)
        .attr('id', 'svg');
    
    var states = svg.append("g")
        .attr("id", "states");
    // Get vector data
    d3.json("us-states.json", function(json) {
        states.selectAll("path")
            .data(json.features)
            .enter().append("path")
            .attr('id', function(d) { return d.id})
            .attr('fill', '#336699')
            .attr('stroke', 'white')
            .attr('stroke-width', '1px')
            .attr("d", path);
        
        var svgElement = document.getElementById('svg'),
            canvasElement = document.getElementById('canvas');
        
        var xml = (new XMLSerializer).serializeToString(svgElement);
        canvg(canvasElement, xml);
    });
});
</script>